<mat-tab-group class="h-full" mat-align-tabs="center">
    <mat-tab label="PersÃ¶nliche Infos">
        <div class="p-6 h-lg">
            <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="20px">
                <div class="w-full" fxLayout="row" fxLayoutAlign="space-evenly center">
                    <div class="p-4 text-center  trans-ease-out relative">
                        <img class="avatar h-32 w-32 mx-auto" matRipple
                             src="/assets/img/illustrations/idea.svg">
                    </div>
                    <ng-container *ngIf="authService.user$ | async as user">
                        <h2 class="mat-display-1 mb-1 mt-3">{{ user.firstName + '' + user.lastName }}</h2>
                    </ng-container>
                </div>
                <div class="w-full" fxLayout="row" fxLayoutAlign="center center">
                    <h4 class="mat-subheading-2 mb-1 mt-3">Irgendein Spruch</h4>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab label="Meine Aufnahmen">
        <div class="p-6 h-lg">
            <div fxLayout="column" fxLayout.lt-md="column" fxLayoutGap="20px">
                <div fxLayout="row" fxLayoutAlign="space-evenly center">
                    <table [dataSource]="dataSource" class="w-full" mat-table matSort>

                        <!--- Note that these columns can be defined in any order.
                              The actual rendered columns are set as a property on the row definition" -->

                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="checkbox">
                            <th *matHeaderCellDef mat-header-cell>
                                <mat-checkbox (change)="$event ? masterToggle() : null"
                                              [checked]="selection.hasValue() && isAllSelected()"
                                              [indeterminate]="selection.hasValue() && !isAllSelected()"
                                              color="primary">
                                </mat-checkbox>
                            </th>
                            <td *matCellDef="let row" class="w-4" mat-cell>
                                <mat-checkbox (change)="$event ? selection.toggle(row) : null"
                                              (click)="$event.stopPropagation()"
                                              [checked]="selection.isSelected(row)"
                                              color="primary">
                                </mat-checkbox>
                            </td>
                        </ng-container>

                        <!-- Image Column -->
                        <ng-container matColumnDef="image">
                            <th *matHeaderCellDef mat-header-cell></th>
                            <td *matCellDef="let row" class="w-8 min-w-8 pr-0" mat-cell>
                                <img [src]="row['imageSrc']" class="avatar h-8 w-8 align-middle">
                            </td>
                        </ng-container>

                        <!-- Text Columns -->
                        <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                            <ng-container *ngIf="column.type === 'text'" [matColumnDef]="column.property">
                                <th *matHeaderCellDef class="uppercase" mat-header-cell
                                    mat-sort-header> {{ column.label }}</th>
                                <td *matCellDef="let row" [ngClass]="column.cssClasses"
                                    mat-cell>{{ row[column.property] }}</td>
                            </ng-container>
                        </ng-container>

                        <!-- Contact Column -->
                        <ng-container matColumnDef="contact">
                            <th *matHeaderCellDef mat-header-cell mat-sort-header></th>
                            <td *matCellDef="let row" mat-cell>
                                <div class="flex">
                                    <a (click)="$event.stopPropagation()"
                                       class="w-8 h-8 leading-none flex items-center justify-center hover:bg-hover text-primary bg-primary-light"
                                       mat-icon-button>
                                        <mat-icon>add</mat-icon>
                                    </a>

                                    <a (click)="$event.stopPropagation()"
                                       class="w-8 h-8 leading-none flex items-center justify-center ml-1 hover:bg-hover text-teal bg-teal-light"
                                       mat-icon-button>
                                        <mat-icon>add</mat-icon>
                                    </a>

                                    <a (click)="$event.stopPropagation()"
                                       class="w-8 h-8 leading-none flex items-center justify-center ml-1 hover:bg-hover text-green bg-green-light"
                                       mat-icon-button>
                                        <mat-icon>add</mat-icon>
                                    </a>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Label Column -->
                        <ng-container matColumnDef="labels">
                            <th *matHeaderCellDef class="uppercase" mat-header-cell mat-sort-header>Labels</th>
                            <td *matCellDef="let row" mat-cell>
                                <div (click)="$event.stopPropagation()" fxLayoutAlign="start center" fxLayoutGap="4px">
                                    <div *ngFor="let label of row.labels"
                                         [ngClass]="[label.textClass, label.bgClass]"
                                         class="rounded px-2 py-1 font-medium text-xs"
                                         fxFlex="none">
                                        {{ label.text }}
                                    </div>
                                    <div (click)="labelSelect.open()"
                                         class="text-secondary bg-base text-hint cursor-pointer hover:bg-hover"
                                         fxFlex="none"
                                         fxLayout="row"
                                         fxLayoutAlign="center center">
                                        <mat-icon>add</mat-icon>
                                    </div>
                                    <mat-select #labelSelect="matSelect"
                                                (selectionChange)="onLabelChange($event, row)"
                                                [value]="row.labels"
                                                class="invisible w-0 h-0 text-sm"
                                                fxFlex="0 1 0px"
                                                multiple>
                                        <mat-option *ngFor="let label of labels" [value]="label">
                                            <div [ngClass]="label.previewClass"
                                                 class="h-6 w-6 align-middle ltr:mr-2 rtl:ml-2 rounded inline-block"></div>
                                            <span>{{ label.text }}</span>
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Action Column -->
                        <ng-container matColumnDef="actions">
                            <th *matHeaderCellDef mat-header-cell mat-sort-header></th>
                            <td *matCellDef="let row" class="w-10 text-secondary" mat-cell>
                                <button (click)="$event.stopPropagation()"
                                        [matMenuTriggerData]="{ customer: row }"
                                        [matMenuTriggerFor]="actionsMenu"
                                        mat-icon-button
                                        type="button">
                                    <mat-icon>add</mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
                        <tr (click)="updateCustomer(row)"
                            *matRowDef="let row; columns: visibleColumns;"
                            class="hover:bg-hover trans-ease-out cursor-pointer"
                            mat-row></tr>
                    </table>

                    <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize"
                                   class="sticky left-0"></mat-paginator>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab label="Meine Einnahmen">
        <div class="p-6 h-lg">
            <div fxLayout="column" fxLayout.lt-md="column" fxLayoutGap="20px">
                <div fxFlex="auto">
                    <div class="px-6 py-4 h-full" fxLayout="column" fxLayoutAlign="center">
                    </div>
                </div>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>



<mat-menu #columnFilterMenu="matMenu" xPosition="before" yPosition="below">
    <button (click)="toggleColumnVisibility(column, $event)" *ngFor="let column of columns"
            class="checkbox-item mat-menu-item">
        <mat-checkbox (click)="$event.stopPropagation()" [(ngModel)]="column.visible" color="primary">
            {{ column.label }}
        </mat-checkbox>
    </button>
</mat-menu>

<mat-menu #actionsMenu="matMenu" xPosition="before" yPosition="below">
    <ng-template let-customer="customer" matMenuContent>
        <button (click)="updateCustomer(customer)" mat-menu-item>
            <mat-icon>add</mat-icon>
            <span>Modify</span>
        </button>
        <button (click)="deleteCustomer(customer)" mat-menu-item>
            <mat-icon>add</mat-icon>
            <span>Delete</span>
        </button>
    </ng-template>
</mat-menu>
